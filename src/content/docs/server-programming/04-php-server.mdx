---
title: PHP en el Servidor
description: Aprende a usar PHP en el servidor y cómo funciona el ciclo de vida de una petición HTTP.
---

import { FileTree, Card, Steps } from '@astrojs/starlight/components';

# PHP en el Servidor

PHP es un lenguaje de programación especialmente diseñado para el desarrollo web del lado del servidor. Cuando se ejecuta en Apache, permite crear páginas web dinámicas que pueden interactuar con bases de datos y generar contenido HTML en tiempo real.

## ¿Cómo funciona PHP en Apache?

Apache utiliza un módulo llamado `mod_php` que permite ejecutar código PHP directamente en el servidor. El proceso es el siguiente:

<Card title="Ciclo de vida de una petición PHP" icon="information">
  1. El navegador solicita una página PHP al servidor
  2. Apache recibe la solicitud y reconoce la extensión `.php`
  3. Apache pasa el archivo al intérprete PHP
  4. PHP procesa el código y genera HTML como resultado
  5. Apache envía el HTML generado al navegador
  6. El navegador muestra la página al usuario
</Card>

:::note
Por defecto, Laragon viene con Apache y PHP preinstalados. Esto facilita enormemente el desarrollo, ya que solo necesitas crear un nuevo proyecto y abrirlo en el navegador.
:::

## Ubicación de archivos PHP

Al igual que los archivos HTML, los archivos PHP deben estar en la carpeta raíz del servidor web:

- En Laragon, generalmente es la carpeta `www`
- En XAMPP o WampServer, suele ser la carpeta `htdocs`

<FileTree>
- www/ (o htdocs/)
  - index.php
  - contacto.php
  - proyectos/
    - index.php
    - detalles.php
</FileTree>

## Enrutamiento de Archivos PHP

:::caution[Convención de URLs]
Para facilitar la lectura, usaremos una notación abreviada para las URLs:
- `/` se refiere a `http://localhost/`
- `/index.php` se refiere a `http://localhost/index.php`
- `/contacto.php` se refiere a `http://localhost/contacto.php`
:::

PHP utiliza un **enrutamiento basado en archivos**. Esto significa que el nombre del archivo PHP se convierte directamente en la URL de la página. Por ejemplo:

| Archivo | URL |
|---------|-----|
| `index.php` | `/` o `/index.php` |
| `contacto.php` | `/contacto.php` |
| `proyectos/detalles.php` | `/proyectos/detalles.php` |

:::tip[Archivos de índice]
Apache tiene una jerarquía predefinida cuando se accede a una carpeta:
1. **index.php**: Es el archivo por defecto con primera prioridad
2. **index.html**: Se carga si no existe index.php

Por ejemplo, si accedes a `/proyectos/`, Apache buscará primero `proyectos/index.php` y luego `proyectos/index.html`.
:::

Veamos un ejemplo de estructura de archivos y sus correspondientes URLs:

<FileTree>
- index.php → `/` o `/index.php`
- contacto.php → `/contacto.php`
- operaciones/
  - añadir.php → `/operaciones/anadir.php`
  - eliminar.php → `/operaciones/eliminar.php`
  - index.php → `/operaciones/` o `/operaciones/index.php`
</FileTree>

## Tu primer script PHP

<Steps>
1. Crea un archivo llamado `hola.php` en tu directorio raíz.

2. Escribe el siguiente código PHP:
   ```php
   <?php
   // Esto es un comentario en PHP
   echo "<h1>¡Hola, mundo!</h1>";
   echo "<p>Esta es mi primera página PHP.</p>";
   echo "<p>La fecha actual del servidor es: " . date("Y-m-d H:i:s") . "</p>";
   ?>
   ```

3. Abre un navegador y visita `http://localhost/hola.php`.

4. Verás el texto formateado como HTML y la fecha actual del servidor.
</Steps>

## PHP y HTML trabajando juntos

La verdadera potencia de PHP está en su capacidad para combinarse con HTML. Puedes alternar entre código PHP y HTML en un mismo archivo:

```php
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Mi primera página PHP</title>
</head>
<body>
    <header>
        <h1>Bienvenido a mi sitio</h1>
    </header>
    
    <main>
        <?php
        // Código PHP para generar contenido dinámico
        echo "<h2>Hola, mundo!</h2>";
        ?>
        <p>La fecha es: <?php echo date("d/m/Y"); ?></p>
    </main>

</body>
</html>
```

En este ejemplo, PHP genera diferentes saludos según la hora del día y también inserta la fecha actual en dos lugares.


### Formularios HTML y PHP

Los formularios HTML son una forma común de interactuar con los usuarios. Puedes enviar datos a un script PHP para procesarlos.



### El atributo `action` y `method`
- El atributo `action` del formulario indica a dónde se enviarán los datos.
- El atributo `method` especifica cómo se enviarán los datos (GET o POST).

```html "action="procesar.php"" "method="POST"""
<form action="procesar.php" method="GET">
    <label for="nombre">Nombre:</label>
    <input type="text" id="nombre" required>
    
    <label for="email">Email:</label>
    <input type="email" id="email"required>
    
    <input type="submit" value="Enviar">
</form>
```

#### El atributo `name` de los inputs
Cada campo de entrada debe tener un atributo `name` único. Este nombre se utilizara para enviar los datos al servidor y se convertirá en una clave para acceder a los valores en PHP.

```html "name="nombre"" "name="email""
<form action="procesar.php" method="POST">
    <label for="nombre">Nombre:</label>
    <input type="text" id="nombre" name="nombre" required>
    
    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required>
    
    <input type="submit" value="Enviar">
</form>
```
## El método GET
El metodo GET comunmente se usa para **pedir** datos al servidor. Tambien puede tener datos en la URL.
:::caution
[Seguridad]
El método GET no es seguro para enviar datos sensibles, ya que los datos se envían como parte de la URL y pueden ser visibles en el historial del navegador o en los registros del servidor.
:::

### GET en PHP
El método GET envía los datos del formulario como parte de la URL. Esto es útil para búsquedas o filtros, pero no es seguro para datos sensibles.

```html "method="GET""
<form action="procesar.php" method="GET">
    <label for="nombre">Nombre:</label>
    <input type="text" id="nombre" name="nombre" required>
    
    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required>
    
    <input type="submit" value="Enviar">
</form>
```

Aqui se entiendo que se hara una **peticion** GET a la direccion `procesar.php` como ruta relativa. Para leer los datos en PHP, se utiliza la variable superglobal `$_GET`.
- `$_GET['nombre']`: Contiene el valor del campo `nombre` enviado por el formulario.
- `$_GET['email']`: Contiene el valor del campo `email` enviado por el formulario.
:::tip
Note que `$_GET` es un arreglo asociativo que contiene los datos enviados por el formulario. Puedes acceder a los valores utilizando las claves definidas en el atributo `name` de cada campo.
:::
```php
<?php
// procesar.php
$nombre = $_GET['nombre'];
$email = $_GET['email'];
echo "<h1>Hola, $nombre</h1>";
echo "<p>Tu email es: $email</p>";
?>
```

